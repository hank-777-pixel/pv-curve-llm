<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>P-V Curve Agent</title>
  <link rel="stylesheet" href="/styles.css" />
  <link rel="icon" href="data:," />
  <meta name="color-scheme" content="dark" />
  <meta name="theme-color" content="#000000" />
  <meta name="description" content="Power Systems PV Curve Analysis" />
  <style>html{background:#000000}</style>
</head>
<body>
  <div class="app">
    <!-- Sidebar -->
    <div class="sidebar">
      <!-- Model Selection -->
      <div class="model-section">
        <h3>AI Model</h3>
        <select id="model-provider" class="model-select">
          <option value="ollama">Ollama (Local)</option>
          <option value="openai">OpenAI (API)</option>
        </select>
        <div class="model-status" id="model-status">
          <div class="status-indicator"></div>
          <span>Connecting...</span>
        </div>
      </div>

      <!-- Current Parameters -->
      <div class="parameters-section">
        <h3>Current Parameters</h3>
        <div class="parameter-grid">
          <div class="param-item">
            <label>Grid System</label>
            <span id="param-grid">IEEE39</span>
          </div>
          <div class="param-item">
            <label>Bus ID</label>
            <span id="param-bus">5</span>
          </div>
          <div class="param-item">
            <label>Power Factor</label>
            <span id="param-pf">0.95</span>
          </div>
          <div class="param-item">
            <label>Step Size</label>
            <span id="param-step">0.01</span>
          </div>
          <div class="param-item">
            <label>Max Scale</label>
            <span id="param-scale">3.0</span>
          </div>
          <div class="param-item">
            <label>Load Type</label>
            <span id="param-load">Inductive</span>
          </div>
        </div>
      </div>

      <!-- Graph Directory -->
      <div class="graphs-section">
        <div class="section-header">
          <h3>Generated Graphs</h3>
          <div class="graph-controls">
            <button id="refresh-graphs" class="btn-icon" title="Refresh">â†»</button>
            <button id="clear-graphs" class="btn-icon btn-danger" title="Clear All">ðŸ—‘</button>
          </div>
        </div>
        <div class="graph-list" id="graph-directory">
          <div class="no-graphs">No graphs generated yet</div>
        </div>
      </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
      <!-- Header -->
      <div class="header">
        <h1>P-V Curve Agent</h1>
        <div class="header-controls">
          <button id="new-session" class="btn-white">New Session</button>
          <button id="export-session" class="btn-white">Export</button>
        </div>
      </div>

      <!-- Chat Container -->
      <div class="chat-container">
        <main id="chat" class="chat" aria-live="polite" aria-label="Chat transcript"></main>
        
        <!-- Input Area -->
        <div class="input-area">
          <div class="quick-actions">
            <button class="quick-btn" onclick="window.chat.sendQuickMessage('Generate a PV curve for IEEE 39 bus system')">Generate PV Curve</button>
            <button class="quick-btn" onclick="window.chat.sendQuickMessage('Change power factor to 0.9')">Change Power Factor</button>
            <button class="quick-btn" onclick="window.chat.sendQuickMessage('Switch to IEEE 14 bus system')">Switch Grid</button>
            <button class="quick-btn" onclick="window.chat.sendQuickMessage('Analyze voltage stability')">Analyze Stability</button>
          </div>
          
          <form id="chat-form" class="input-wrapper" autocomplete="off">
            <input id="message-input" name="message" type="text" placeholder="Ask about power systems, generate PV curves, or modify parameters..." aria-label="Message" required />
            <button type="submit" class="send-btn" aria-label="Send message">
              <span>Send</span>
            </button>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Graph Modal -->
  <div id="graph-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="modal-title">PV Curve</h3>
        <button class="modal-close" onclick="window.chat.closeGraphModal()">Ã—</button>
      </div>
      <div class="modal-body">
        <img id="modal-image" src="" alt="PV Curve Graph" />
        <div class="graph-details" id="modal-details"></div>
      </div>
    </div>
  </div>

  <script src="/app.js" defer></script>
</body>
</html>


